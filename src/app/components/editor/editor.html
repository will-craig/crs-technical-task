<!-- Backdrop -->
<div
  class="backdrop"
  [class.show]="open"
  (click)="close()"
  aria-hidden="true">
</div>

<!-- Drawer panel -->
<aside
  class="drawer"
  [class.open]="open"
  role="dialog"
  aria-modal="true"
  [attr.aria-label]="title() || 'Panel'">

  <header class="drawer__header">
    <h2 class="drawer__title">{{ title() }}</h2>
    <button class="drawer__close" type="button" (click)="close()" aria-label="Close">âœ•</button>
  </header>

  <div class="drawer__content">
    <div class="editor-grid">
      <!-- Left: New Animal Form -->
      <div class="editor-form">
        <h3>Add New Animal</h3>
  <form (submit)="$event.preventDefault(); saveNewAnimal()">
          <label>
            Name:
            <input type="text" [(ngModel)]="newAnimal.name" name="animalName" required />
          </label>
          <div>
            <h4>Selected Traits</h4>
            <ul>
              @for (trait of newAnimal.traits; track $index) {
                <li>
                  {{ trait.name }}
                  <button type="button" (click)="removeTrait(trait)">Remove</button>
                </li>
              }
            </ul>
            <button type="button" (click)="removeAllTraits()">Clear All Traits</button>
          </div>
          <button type="submit">Save</button>
          <button type="button" (click)="cancelNewAnimal()">Cancel</button>
        </form>
        <button *ngIf="!newAnimal" type="button" (click)="createNewAnimal()">Add New Animal</button>
      </div>

      <!-- Right: Trait List -->
      <div class="editor-traits">
        <h3>Available Traits</h3>
        <ul>
          @for (trait of availableTraits; track $index) {
            <li>
              {{ trait.name }}
              <button type="button" (click)="addTrait(trait)">Add</button>
            </li>
          }
        </ul>
        <button type="button" (click)="addAllTraits()">Add All Traits</button>
      </div>
    </div>
  </div>
</aside>
